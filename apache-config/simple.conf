# Einfache Apache Config für Keyhelp
# Diese in die Domain-Einstellungen einfügen

ProxyPreserveHost On
ProxyRequests Off

# Let's Encrypt
ProxyPass /.well-known/ !

# Admin API
ProxyPass /admin.php http://127.0.0.1:8374/admin.php
ProxyPassReverse /admin.php http://127.0.0.1:8374/admin.php

# Bible Search API
ProxyPass /bible_search.php http://127.0.0.1:8374/bible_search.php
ProxyPassReverse /bible_search.php http://127.0.0.1:8374/bible_search.php

# API Calls mit api_key Parameter direkt an Backend
RewriteEngine On
RewriteCond %{QUERY_STRING} api_key=
RewriteRule ^/?$ http://127.0.0.1:8374/index.php [P,L]

# Frontend (alles andere)
ProxyPass / http://127.0.0.1:3030/
ProxyPassReverse / http://127.0.0.1:3030/

# CORS Headers
Header always set Access-Control-Allow-Origin "*"
Header always set Access-Control-Allow-Methods "GET,POST,PUT,DELETE,OPTIONS"
Header always set Access-Control-Allow-Headers "Content-Type,Authorization,X-API-Key"